import{r as s,a as M}from"./index.Dy7WD_uu.js";import{j as N}from"./index.DpG565of.js";import{u as R,P as U,d as $}from"./utils.noezS0Ek.js";function C(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function de(t,e=[]){let n=[];function o(c,l){const u=s.createContext(l),d=n.length;n=[...n,l];const i=f=>{const{scope:v,children:E,...p}=f,h=v?.[t]?.[d]||u,y=s.useMemo(()=>p,Object.values(p));return N.jsx(h.Provider,{value:y,children:E})};i.displayName=c+"Provider";function a(f,v){const E=v?.[t]?.[d]||u,p=s.useContext(E);if(p)return p;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${c}\``)}return[i,a]}const r=()=>{const c=n.map(l=>s.createContext(l));return function(u){const d=u?.[t]||c;return s.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return r.scopeName=t,[o,j(r,...e)]}function j(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const o=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(c){const l=o.reduce((u,{useScope:d,scopeName:i})=>{const f=d(c)[`__scope${i}`];return{...u,...f}},{});return s.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}function w(t){const e=s.useRef(t);return s.useEffect(()=>{e.current=t}),s.useMemo(()=>(...n)=>e.current?.(...n),[])}function H(t,e=globalThis?.document){const n=w(t);s.useEffect(()=>{const o=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",o,{capture:!0}),()=>e.removeEventListener("keydown",o,{capture:!0})},[n,e])}var z="DismissableLayer",D="dismissableLayer.update",K="dismissableLayer.pointerDownOutside",V="dismissableLayer.focusOutside",T,F=s.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),X=s.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:c,onInteractOutside:l,onDismiss:u,...d}=t,i=s.useContext(F),[a,f]=s.useState(null),v=a?.ownerDocument??globalThis?.document,[,E]=s.useState({}),p=R(e,m=>f(m)),h=Array.from(i.layers),[y]=[...i.layersWithOutsidePointerEventsDisabled].slice(-1),W=h.indexOf(y),S=a?h.indexOf(a):-1,B=i.layersWithOutsidePointerEventsDisabled.size>0,L=S>=W,k=G(m=>{const P=m.target,A=[...i.branches].some(g=>g.contains(P));!L||A||(r?.(m),l?.(m),m.defaultPrevented||u?.())},v),x=J(m=>{const P=m.target;[...i.branches].some(g=>g.contains(P))||(c?.(m),l?.(m),m.defaultPrevented||u?.())},v);return H(m=>{S===i.layers.size-1&&(o?.(m),!m.defaultPrevented&&u&&(m.preventDefault(),u()))},v),s.useEffect(()=>{if(a)return n&&(i.layersWithOutsidePointerEventsDisabled.size===0&&(T=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),i.layersWithOutsidePointerEventsDisabled.add(a)),i.layers.add(a),I(),()=>{n&&i.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=T)}},[a,v,n,i]),s.useEffect(()=>()=>{a&&(i.layers.delete(a),i.layersWithOutsidePointerEventsDisabled.delete(a),I())},[a,i]),s.useEffect(()=>{const m=()=>E({});return document.addEventListener(D,m),()=>document.removeEventListener(D,m)},[]),N.jsx(U.div,{...d,ref:p,style:{pointerEvents:B?L?"auto":"none":void 0,...t.style},onFocusCapture:C(t.onFocusCapture,x.onFocusCapture),onBlurCapture:C(t.onBlurCapture,x.onBlurCapture),onPointerDownCapture:C(t.onPointerDownCapture,k.onPointerDownCapture)})});X.displayName=z;var Y="DismissableLayerBranch",q=s.forwardRef((t,e)=>{const n=s.useContext(F),o=s.useRef(null),r=R(e,o);return s.useEffect(()=>{const c=o.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),N.jsx(U.div,{...t,ref:r})});q.displayName=Y;function G(t,e=globalThis?.document){const n=w(t),o=s.useRef(!1),r=s.useRef(()=>{});return s.useEffect(()=>{const c=u=>{if(u.target&&!o.current){let d=function(){_(K,n,i,{discrete:!0})};const i={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=d,e.addEventListener("click",r.current,{once:!0})):d()}else e.removeEventListener("click",r.current);o.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",c),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>o.current=!0}}function J(t,e=globalThis?.document){const n=w(t),o=s.useRef(!1);return s.useEffect(()=>{const r=c=>{c.target&&!o.current&&_(V,n,{originalEvent:c},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function I(){const t=new CustomEvent(D);document.dispatchEvent(t)}function _(t,e,n,{discrete:o}){const r=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),o?$(r,c):r.dispatchEvent(c)}var O=globalThis?.document?s.useLayoutEffect:()=>{},Q=M[" useId ".trim().toString()]||(()=>{}),Z=0;function le(t){const[e,n]=s.useState(Q());return O(()=>{n(o=>o??String(Z++))},[t]),t||(e?`radix-${e}`:"")}function ee(t,e){return s.useReducer((n,o)=>e[n][o]??n,t)}var te=t=>{const{present:e,children:n}=t,o=ne(e),r=typeof n=="function"?n({present:o.isPresent}):s.Children.only(n),c=R(o.ref,se(r));return typeof n=="function"||o.isPresent?s.cloneElement(r,{ref:c}):null};te.displayName="Presence";function ne(t){const[e,n]=s.useState(),o=s.useRef(null),r=s.useRef(t),c=s.useRef("none"),l=t?"mounted":"unmounted",[u,d]=ee(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const i=b(o.current);c.current=u==="mounted"?i:"none"},[u]),O(()=>{const i=o.current,a=r.current;if(a!==t){const v=c.current,E=b(i);t?d("MOUNT"):E==="none"||i?.display==="none"?d("UNMOUNT"):d(a&&v!==E?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,d]),O(()=>{if(e){let i;const a=e.ownerDocument.defaultView??window,f=E=>{const h=b(o.current).includes(E.animationName);if(E.target===e&&h&&(d("ANIMATION_END"),!r.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",i=a.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},v=E=>{E.target===e&&(c.current=b(o.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{a.clearTimeout(i),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:s.useCallback(i=>{o.current=i?getComputedStyle(i):null,n(i)},[])}}function b(t){return t?.animationName||"none"}function se(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var re=M[" useInsertionEffect ".trim().toString()]||O;function fe({prop:t,defaultProp:e,onChange:n=()=>{},caller:o}){const[r,c,l]=oe({defaultProp:e,onChange:n}),u=t!==void 0,d=u?t:r;{const a=s.useRef(t!==void 0);s.useEffect(()=>{const f=a.current;f!==u&&console.warn(`${o} is changing from ${f?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),a.current=u},[u,o])}const i=s.useCallback(a=>{if(u){const f=ie(a)?a(t):a;f!==t&&l.current?.(f)}else c(a)},[u,t,c,l]);return[d,i]}function oe({defaultProp:t,onChange:e}){const[n,o]=s.useState(t),r=s.useRef(n),c=s.useRef(e);return re(()=>{c.current=e},[e]),s.useEffect(()=>{r.current!==n&&(c.current?.(n),r.current=n)},[n,r]),[n,o,c]}function ie(t){return typeof t=="function"}export{X as D,te as P,O as a,fe as b,de as c,le as d,C as e,w as u};
