import{r,a as R}from"./index.Dy7WD_uu.js";import{j as h}from"./index.DpG565of.js";import{u as A}from"./utils.DwbP7QOt.js";function L(e,n=[]){let t=[];function s(u,f){const c=r.createContext(f),i=t.length;t=[...t,f];const a=l=>{const{scope:p,children:m,...N}=l,S=p?.[e]?.[i]||c,E=r.useMemo(()=>N,Object.values(N));return h.jsx(S.Provider,{value:E,children:m})};a.displayName=u+"Provider";function d(l,p){const m=p?.[e]?.[i]||c,N=r.useContext(m);if(N)return N;if(f!==void 0)return f;throw new Error(`\`${l}\` must be used within \`${u}\``)}return[a,d]}const o=()=>{const u=t.map(f=>r.createContext(f));return function(c){const i=c?.[e]||u;return r.useMemo(()=>({[`__scope${e}`]:{...c,[e]:i}}),[c,i])}};return o.scopeName=e,[s,C(o,...n)]}function C(...e){const n=e[0];if(e.length===1)return n;const t=()=>{const s=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(u){const f=s.reduce((c,{useScope:i,scopeName:a})=>{const l=i(u)[`__scope${a}`];return{...c,...l}},{});return r.useMemo(()=>({[`__scope${n.scopeName}`]:f}),[f])}};return t.scopeName=n.scopeName,t}function D(e,n,{checkForDefaultPrevented:t=!0}={}){return function(o){if(e?.(o),t===!1||!o.defaultPrevented)return n?.(o)}}var g=globalThis?.document?r.useLayoutEffect:()=>{},M=R[" useInsertionEffect ".trim().toString()]||g;function j({prop:e,defaultProp:n,onChange:t=()=>{},caller:s}){const[o,u,f]=P({defaultProp:n,onChange:t}),c=e!==void 0,i=c?e:o;{const d=r.useRef(e!==void 0);r.useEffect(()=>{const l=d.current;l!==c&&console.warn(`${s} is changing from ${l?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=c},[c,s])}const a=r.useCallback(d=>{if(c){const l=x(d)?d(e):d;l!==e&&f.current?.(l)}else u(d)},[c,e,u,f]);return[i,a]}function P({defaultProp:e,onChange:n}){const[t,s]=r.useState(e),o=r.useRef(t),u=r.useRef(n);return M(()=>{u.current=n},[n]),r.useEffect(()=>{o.current!==t&&(u.current?.(t),o.current=t)},[t,o]),[t,s,u]}function x(e){return typeof e=="function"}function y(e,n){return r.useReducer((t,s)=>n[t][s]??t,e)}var w=e=>{const{present:n,children:t}=e,s=O(n),o=typeof t=="function"?t({present:s.isPresent}):r.Children.only(t),u=A(s.ref,I(o));return typeof t=="function"||s.isPresent?r.cloneElement(o,{ref:u}):null};w.displayName="Presence";function O(e){const[n,t]=r.useState(),s=r.useRef(null),o=r.useRef(e),u=r.useRef("none"),f=e?"mounted":"unmounted",[c,i]=y(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const a=v(s.current);u.current=c==="mounted"?a:"none"},[c]),g(()=>{const a=s.current,d=o.current;if(d!==e){const p=u.current,m=v(a);e?i("MOUNT"):m==="none"||a?.display==="none"?i("UNMOUNT"):i(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,i]),g(()=>{if(n){let a;const d=n.ownerDocument.defaultView??window,l=m=>{const S=v(s.current).includes(m.animationName);if(m.target===n&&S&&(i("ANIMATION_END"),!o.current)){const E=n.style.animationFillMode;n.style.animationFillMode="forwards",a=d.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=E)})}},p=m=>{m.target===n&&(u.current=v(s.current))};return n.addEventListener("animationstart",p),n.addEventListener("animationcancel",l),n.addEventListener("animationend",l),()=>{d.clearTimeout(a),n.removeEventListener("animationstart",p),n.removeEventListener("animationcancel",l),n.removeEventListener("animationend",l)}}else i("ANIMATION_END")},[n,i]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:r.useCallback(a=>{s.current=a?getComputedStyle(a):null,t(a)},[])}}function v(e){return e?.animationName||"none"}function I(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}var T=R[" useId ".trim().toString()]||(()=>{}),U=0;function F(e){const[n,t]=r.useState(T());return g(()=>{t(s=>s??String(U++))},[e]),e||(n?`radix-${n}`:"")}export{w as P,F as a,D as b,L as c,g as d,j as u};
